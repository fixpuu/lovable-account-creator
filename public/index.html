<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>‚ú® Lovable Account Creator ‚ú®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f111a;
      --card: #1a1c29;
      --muted: #a1a1aa;
      --accent: #6d28d9;
      --accent-2: #9333ea;
      --text: #e5e5e5;
      --panel: #12131c;
    }
    * { box-sizing: border-box; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: "Consolas", monospace;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    header { text-align: center; padding: 18px 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); width: 100%; color: #fff; box-shadow: 0 2px 8px rgba(0,0,0,0.3);}
    header pre { margin: 0; font-size: 12px; line-height: 1.05; white-space: pre; }
    main { width: 94%; max-width: 900px; background: var(--card); border-radius: 12px; padding: 20px; box-shadow: 0 6px 18px rgba(0,0,0,0.45); margin-top: 20px; }
    .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .controls { margin-bottom:12px; display:flex; gap:8px; flex-wrap:wrap; }
    button { background: var(--accent); border: none; color: #fff; font-size: 14px; padding: 10px 14px; border-radius: 8px; cursor: pointer; transition: 0.14s; }
    button.secondary { background:#374151; }
    button:active { transform: translateY(1px); }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    #log { border: 1px solid #3f3f46; background: var(--panel); padding: 12px; height: 360px; overflow: auto; border-radius: 8px; font-size: 13px; color: #d4d4d8; white-space: pre-wrap; }
    .creds { margin-top: 12px; display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .cred-box { background:#0b0c10; padding:10px; border-radius:8px; border:1px solid #222; min-width:240px; font-size:13px; color:#cfcfe6; }
    footer { margin-top: 18px; padding: 12px; font-size: 12px; color: var(--muted); width:100%; text-align:center; }
    .credit { font-weight:600; color:#fff; }
    .spinner { display: inline-block; width: 14px; height: 14px; border: 2px solid rgba(255,255,255,0.3); border-radius: 50%; border-top-color: #fff; animation: spin 1s linear infinite; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <header>
    <pre>
  _                     _     _                                        _    _____                _             
 | |                   | |   | |        /\                            | |  / ____|              | |            
 | |     _____   ____ _| |__ | | ___   /  \   ___ ___ ___  _   _ _ __ | |_| |     _ __ ___  __ _| |_ ___  _ __ 
 | |    / _ \ \ / / _` | '_ \| |/ _ \ / /\ \ / __/ __/ _ \| | | | '_ \| __| |    | '__/ _ \/ _` | __/ _ \| '__|
 | |___| (_) \ V / (_| | |_) | |  __// ____ \ (_| (_| (_) | |_| | | | | |_| |____| | |  __/ (_| | || (_) | |   
 |______\___/ \_/ \__,_|_.__/|_|\___/_/    \_\___\___\___/ \__,_|_| |_|\__|\_____|_|  \___|\__,_|\__\___/|_|   
                                                                                                                
  Made with üíú by Fixpu
https://github.com/fixpuu
Don't skid this shit, kids
</pre>
  </header>

  <main>
    <div class="row" style="justify-content:space-between;align-items:center;margin-bottom:8px">
      <div>
        <strong>Lovable Account Creator</strong>
        <div style="color:var(--muted);font-size:13px">Made by Fixpu ‚Ä¢ github.com/fixpuu</div>
      </div>
      <div class="controls">
        <button id="createBtn">üöÄ Create Account</button>
        <button id="clearLog" class="secondary">‚úñ Clear Log</button>
      </div>
    </div>

    <div class="row" style="gap:10px;margin-bottom:10px">
      <div class="cred-box" id="emailBox">Email: <span id="emailText">‚Äî</span></div>
      <div class="cred-box" id="passBox">Password: <span id="passText">‚Äî</span></div>
      <div style="display:flex;gap:8px">
        <button id="copyEmailBtn" class="secondary">Copy Email</button>
        <button id="copyPassBtn" class="secondary">Copy Password</button>
        <button id="openLinkBtn" class="secondary" style="display:none">Open Verification Link</button>
      </div>
    </div>

    <h3 style="margin:6px 0;color:var(--muted)">üìú Real-time Log</h3>
    <div id="log"></div>
  </main>

  <footer>
    <span class="credit">Made by Fixpu</span> ‚Ä¢ github.com/fixpuu ‚Ä¢ Use responsibly
  </footer>

  <script>
    const logEl = document.getElementById('log');
    const createBtn = document.getElementById('createBtn');
    const clearLogBtn = document.getElementById('clearLog');
    const emailText = document.getElementById('emailText');
    const passText = document.getElementById('passText');
    const copyEmailBtn = document.getElementById('copyEmailBtn');
    const copyPassBtn = document.getElementById('copyPassBtn');
    const openLinkBtn = document.getElementById('openLinkBtn');

    let verificationLink = null;

    function appendLog(text) {
      const now = new Date().toLocaleTimeString();
      logEl.textContent += `[${now}] ${text}\n`;
      logEl.scrollTop = logEl.scrollHeight;
    }

    createBtn.addEventListener('click', async () => {
      createBtn.disabled = true;
      createBtn.innerHTML = '<span class="spinner"></span> Creating...';
      emailText.textContent = '‚Äî';
      passText.textContent = '‚Äî';
      openLinkBtn.style.display = 'none';
      verificationLink = null;

      appendLog("‚öôÔ∏è Starting account creation process...");
      appendLog("üîÑ Fetching temporary email domain...");

      try {
        const resp = await fetch('/api/create', { 
          method: 'POST',
          headers: { 'Content-Type': 'application/json' }
        });
        
        if (!resp.ok) {
          throw new Error(`HTTP ${resp.status}: ${resp.statusText}`);
        }

        const data = await resp.json();
        
        if (data.error) {
          appendLog("‚ùå Error: " + JSON.stringify(data.error));
        } else if (data.status === 'success') {
          appendLog("‚úÖ Account created successfully!");
          appendLog("üìß Email: " + data.email);
          appendLog("üîë Password: " + data.password);
          appendLog("üîó Verification link extracted: " + data.verificationLink);
          
          emailText.textContent = data.email;
          passText.textContent = data.password;
          verificationLink = data.verificationLink;
          openLinkBtn.style.display = 'inline-block';
        } else if (data.status === 'waiting') {
          appendLog("‚è≥ " + data.message);
          appendLog("üìß Email: " + data.email);
          appendLog("üîë Password: " + data.password);
          appendLog("‚ÑπÔ∏è You may need to check the email manually later.");
          
          emailText.textContent = data.email;
          passText.textContent = data.password;
        } else {
          appendLog("‚ö†Ô∏è Unexpected response: " + JSON.stringify(data));
        }
      } catch (err) {
        appendLog("‚ùå Error: " + err.message);
        console.error(err);
      } finally {
        createBtn.disabled = false;
        createBtn.innerHTML = 'üöÄ Create Account';
      }
    });

    clearLogBtn.addEventListener('click', () => { 
      logEl.textContent = ""; 
      appendLog("üßπ Log cleared.");
    });

    copyEmailBtn.addEventListener('click', async () => {
      const text = emailText.textContent;
      if (!text || text === '‚Äî') {
        appendLog("‚ö†Ô∏è No email to copy.");
        return;
      }
      try { 
        await navigator.clipboard.writeText(text); 
        appendLog("üìã Email copied to clipboard."); 
      } catch { 
        appendLog("‚ö†Ô∏è Failed to copy email."); 
      }
    });

    copyPassBtn.addEventListener('click', async () => {
      const text = passText.textContent;
      if (!text || text === '‚Äî') {
        appendLog("‚ö†Ô∏è No password to copy.");
        return;
      }
      try { 
        await navigator.clipboard.writeText(text); 
        appendLog("üìã Password copied to clipboard."); 
      } catch { 
        appendLog("‚ö†Ô∏è Failed to copy password."); 
      }
    });

    openLinkBtn.addEventListener('click', () => {
      if (verificationLink) {
        window.open(verificationLink, '_blank');
        appendLog("üåê Opened verification link in new tab.");
      }
    });

    appendLog("üëã Welcome! Click 'Create Account' to start.");
  </script>
</body>
</html>
